<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="qrcode-img.js"></script>
		<script type="text/javascript" src="jquery-migrate-1.1.0.js"></script>
		<script type="text/javascript" src="jquery.jqprint-0.3.js"></script>
				
		<style type="text/css">
			table{
				margin-top: 20px;
				width:80%;
			}
			table td {
				font-size: 12px;
				line-height: 18px;
			}
			table td.qrcode-left, table td.qrcode-right{
				padding-left: 20%;
			}
			table td.product-td{
				width: 50%; 
				padding-left: 20%; 
				font-size: 18px;
			}
			table td.level-td{
				font-size: 18px;
				padding-top: 10px; 
			}
			.big-package td{
				font-size: 20px;
				line-height: 30px;
			}
			.big-package .qrcode-info{
				display: block;
				margin-top: 12px;
				margin-left: 18%;
			}
			.min-package .qrcode-info{
				display: block;
				font-size: 12px;
				margin-top: 8px;
				margin-left: 32%;
			}
			.min-package img{
				width: 90px;
				height: 90px;
			}
			.big-package img{
				width: 140px;
				height: 140px;
			}
		</style>
		
		<style type="text/css" media="print"><!--
			table td {
				font-size: 14pt;
				font-family: 'Microsoft YaHei';
				line-height: 18px;
				padding-top: 4px;
			}
			.un-print {
				display: none;
			}
			.PageNext{
				page-break-after: always;
			}
			.min-package{
				width: 101.6mm;
				height: 12.7mm;
				margin-top: 2px;
			}
			.big-package{
				width: 10cm;
				height: 7cm;
				margin-top: 2px;
			}
			.min-package td{
				width: 50%;
				font-size: 12pt;
				line-height: 12px;
			}
			.big-package td {
				width: 100%;
				font-size: 14pt;
				font-family: 'Open Sans';
				line-height: 36px;
			}
			.min-package td.qrcode-left{
				padding-top: 0px;
				padding-left: 5%;
			}
			.min-package td.qrcode-right{
				padding-top: 0px;
				padding-left: 1%;
			}
			.big-package td.qrcode-left{
				padding-top: 0px;
				padding-left: 5%;
			}			
			.min-package .qrcode-info{
				margin-top: -23.5%;
				margin-left: -30%;
				-ms-transform: scale(0.5);
				-webkit-transform: scale(0.5);
				-moz-transform: scale(0.5);
				-o-transform: scale(0.5);
				transform: scale(0.5);
			}
			.big-package .qrcode-info{
				font-family: 'Microsoft YaHei';
				margin-top: 5px;
				margin-left: 3%;
			}
			.min-package img{
				width: 1.0cm;
				height: 1.0cm;
				padding: 0px;
				padding-top: 0px;
			}
			.big-package img{
				padding: 0px;
				width: 4.0cm;
				height: 4.0cm;
			}
		</style>
				
		<script type="text/javascript">
			function show_qrcode()
			{
				var text = $("#qrtext").val()
				var str = "";
				
				for(var i = 0; i < 20; i++)
				{
					str += "<table class='qrcode-table'>";
		    		str += 	  "<tr>";
		    		str += 		"<td class='qrcode-left'>";
		    		str += 			"<span style='float: left;' id='qrCode_" + (i++) + "'></span>";
		    		str += 			"<span class='qrcode-info'>";
		    		str += 				"<span>名称： 00U83</span></br>";
		    		str += 				"<span>编码：00U83</span></br>";
		    		str += 				"<span>数量：1</span></br>";
		    		str += 				"<span>生产日期：2016-05-16</span>";
		    		str += 			"</span>";
		    		str += 	  	"</td>";
		    		str += 		"<td class='qrcode-right'>";
				    str += 		"<span style='float: left;' id='qrCode_" + (i++) + "'></span>";
				    str += 		"<span class='qrcode-info'>";
				    str += 			"<span>名称： 00U83</span></br>";
		    		str += 			"<span>编码：00U83</span></br>";
		    		str += 			"<span>数量：1</span></br>";
		    		str += 			"<span>生产日期：2016-05-16</span>";
				    str += 		"</span>";
			    	str += 	  	"</td>";
		    		str +=    "</tr>";
		    		str += "</table>";
		    		
		    		if(i < 20)
		    		{
		    			str += "<div class='PageNext'></div>";
		    		}
				}
				
				$("#qrcode").html(str);
				
				for(var i = 0; i < 20; i++)
		    	{
					$("#qrCode_" + i).html(create_qrcode(data[i]["qrcode"]));
		    	}
				
			}
			
			function create_qrcode(text)
			{
				var qr = qrcode(5, 'M');
	            qr.addData(text);
	            qr.make();
	            return qr.createImgTag();
			}
			
			function printQr()
			{
				$("#qrcode").jqprint();
			}
		</script>
		
		<style type="text/css">
	        .qrcode-print{
	        	width: 90px;
	        	height: 90px;
	        }
	        @media print {
	            #qrcode-print {
	                width: 50px;
	                height: 50px;
	            }
	        }
	    </style>
	</head>
	<body>
		<table>
			<tr>
				<td><input type="text" id="qrtext" /></td>
				<td><input type="button" id="btnSubmit" value="生成" onClick="show_qrcode();" /></td>
				<td><input type="button" value="打印" onClick="printQr();" /></td>
			</tr>
		</table>
		<div id="qrcode" class="qrcode-print"></div>
	</body>
</html>